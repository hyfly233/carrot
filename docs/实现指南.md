# Go 语言实现 Hadoop YARN 完整指南

## 项目概述

Carrot 是一个使用 Go 语言从零开始实现的 Hadoop YARN (Yet Another Resource Negotiator) 系统。

## 核心架构设计

### 1. 系统组件

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Client        │    │ ResourceManager │    │  NodeManager    │
│                 │    │                 │    │                 │
│ - 提交应用       │◄───┤ - 资源管理        │◄───┤ - 容器管理       │
│ - 监控状态       │    │ - 应用调度        │    │ - 心跳上报       │
│                 │    │ - 节点管理       │    │ - 资源监控        │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌──────────────────┐
                       │ ApplicationMaster│
                       │                  │
                       │ - 应用协调        │
                       │ - 容器请求        │
                       │ - 任务监控        │
                       └─────────────────┘
```

### 2. 核心特性

#### 资源管理

- **多维度资源**: 支持内存和 CPU 核心数的资源抽象
- **动态分配**: 实时监控和调整资源分配
- **资源隔离**: 基于容器的资源隔离机制

#### 任务调度

- **FIFO 调度器**: 实现先进先出调度策略
- **扩展性设计**: 支持多种调度算法（Capacity、Fair）
- **优先级支持**: 应用程序优先级和队列管理

#### 容器管理

- **生命周期管理**: 完整的容器创建、运行、监控、销毁流程
- **进程隔离**: 基于操作系统进程的隔离
- **状态跟踪**: 实时容器状态监控和报告

## 技术实现细节

### 1. 通信机制

#### HTTP REST API

```go
// ResourceManager API 端点
GET  /ws/v1/cluster/info // 集群信息
GET  /ws/v1/cluster/apps // 应用程序列表
POST /ws/v1/cluster/apps // 提交应用程序
GET  /ws/v1/cluster/nodes // 节点列表
POST /ws/v1/cluster/apps/new-application // 获取应用程序ID
```
