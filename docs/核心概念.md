# Carrot YARN æ ¸å¿ƒæ¦‚å¿µ

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» Carrot YARN çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£ç³»ç»Ÿçš„å·¥ä½œåŸç†ã€‚

## ğŸ—ï¸ YARN åŸºç¡€æ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ YARNï¼Ÿ

YARN (Yet Another Resource Negotiator) æ˜¯ä¸€ä¸ªé›†ç¾¤èµ„æºç®¡ç†ç³»ç»Ÿï¼Œå®ƒå°†èµ„æºç®¡ç†å’Œä½œä¸šè°ƒåº¦/ç›‘æ§åŠŸèƒ½åˆ†ç¦»ï¼Œæä¾›äº†ä¸€ä¸ªé€šç”¨çš„èµ„æºç®¡ç†å¹³å°ã€‚

### YARN çš„æ ¸å¿ƒæ€æƒ³

1. **èµ„æºæŠ½è±¡**: å°†é›†ç¾¤èµ„æºæŠ½è±¡ä¸ºç»Ÿä¸€çš„èµ„æºæ¨¡å‹
2. **åº”ç”¨ç¨‹åºæ¡†æ¶**: æ”¯æŒå¤šç§è®¡ç®—æ¡†æ¶ï¼ˆMapReduceã€Sparkã€Flink ç­‰ï¼‰
3. **å¤šç§Ÿæˆ·**: æ”¯æŒå¤šç”¨æˆ·ã€å¤šåº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œ
4. **èµ„æºéš”ç¦»**: ç¡®ä¿åº”ç”¨ç¨‹åºä¹‹é—´çš„èµ„æºéš”ç¦»

## ğŸ¯ Carrot YARN æ ¸å¿ƒç»„ä»¶

### 1. ResourceManager (RM)

ResourceManager æ˜¯ YARN çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„èµ„æºç®¡ç†å’Œè°ƒåº¦ã€‚

#### ä¸»è¦èŒè´£

-   **èµ„æºç®¡ç†**: è·Ÿè¸ªé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„èµ„æºçŠ¶æ€
-   **åº”ç”¨ç¨‹åºç®¡ç†**: æ¥æ”¶ã€éªŒè¯å’Œè°ƒåº¦åº”ç”¨ç¨‹åº
-   **è°ƒåº¦å†³ç­–**: æ ¹æ®è°ƒåº¦ç­–ç•¥åˆ†é…èµ„æº
-   **æ•…éšœæ¢å¤**: å¤„ç†èŠ‚ç‚¹å’Œåº”ç”¨ç¨‹åºæ•…éšœ

#### æ ¸å¿ƒæ¨¡å—

```go
type ResourceManager struct {
    // åº”ç”¨ç¨‹åºç®¡ç†
    applicationManager *ApplicationManager

    // èŠ‚ç‚¹ç®¡ç†
    nodeManager *NodeManager

    // è°ƒåº¦å™¨
    scheduler Scheduler

    // å®‰å…¨ç®¡ç†
    securityManager *SecurityManager

    // æ¢å¤ç®¡ç†
    recoveryManager *RecoveryManager
}
```

### 2. NodeManager (NM)

NodeManager è¿è¡Œåœ¨é›†ç¾¤çš„æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œè´Ÿè´£è¯¥èŠ‚ç‚¹çš„èµ„æºç®¡ç†å’Œå®¹å™¨æ‰§è¡Œã€‚

#### ä¸»è¦èŒè´£

-   **å®¹å™¨ç®¡ç†**: å¯åŠ¨ã€ç›‘æ§ã€åœæ­¢å®¹å™¨
-   **èµ„æºç›‘æ§**: ç›‘æ§èŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µ
-   **å¿ƒè·³é€šä¿¡**: å‘ ResourceManager æŠ¥å‘ŠçŠ¶æ€
-   **æœ¬åœ°åŒ–**: ä¸‹è½½å’Œç®¡ç†åº”ç”¨ç¨‹åºä¾èµ–

#### æ ¸å¿ƒæ¨¡å—

```go
type NodeManager struct {
    // å®¹å™¨ç®¡ç†
    containerManager *ContainerManager

    // èµ„æºç®¡ç†
    resourceManager *NodeResourceManager

    // æœ¬åœ°åŒ–å™¨
    localizer *Localizer

    // çŠ¶æ€ç®¡ç†
    statusManager *StatusManager
}
```

### 3. ApplicationMaster (AM)

ApplicationMaster æ˜¯æ¯ä¸ªåº”ç”¨ç¨‹åºçš„åè°ƒè€…ï¼Œè´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸã€‚

#### ä¸»è¦èŒè´£

-   **èµ„æºè¯·æ±‚**: å‘ ResourceManager è¯·æ±‚å®¹å™¨
-   **ä»»åŠ¡è°ƒåº¦**: å°†ä»»åŠ¡åˆ†é…ç»™å®¹å™¨
-   **çŠ¶æ€ç›‘æ§**: ç›‘æ§ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
-   **æ•…éšœå¤„ç†**: å¤„ç†ä»»åŠ¡å¤±è´¥å’Œé‡è¯•

#### æ ¸å¿ƒæ¨¡å—

```go
type ApplicationMaster struct {
    // RM å®¢æˆ·ç«¯
    rmClient *RMClient

    // NM å®¢æˆ·ç«¯
    nmClient *NMClient

    // åº”ç”¨ç¨‹åºå®ç°
    application Application

    // HTTP æœåŠ¡å™¨
    httpServer *HTTPServer
}
```

### 4. Client

Client æ˜¯ç”¨æˆ·ä¸ YARN é›†ç¾¤äº¤äº’çš„æ¥å£ã€‚

#### ä¸»è¦åŠŸèƒ½

-   **åº”ç”¨ç¨‹åºæäº¤**: å°†åº”ç”¨ç¨‹åºæäº¤åˆ°é›†ç¾¤
-   **çŠ¶æ€æŸ¥è¯¢**: æŸ¥è¯¢åº”ç”¨ç¨‹åºå’Œé›†ç¾¤çŠ¶æ€
-   **æ—¥å¿—è·å–**: è·å–åº”ç”¨ç¨‹åºæ—¥å¿—
-   **ç®¡ç†æ“ä½œ**: åº”ç”¨ç¨‹åºçš„å¯åŠ¨ã€åœæ­¢ç­‰æ“ä½œ

## ğŸ“Š èµ„æºæ¨¡å‹

### 1. èµ„æºç±»å‹

Carrot YARN æ”¯æŒå¤šç§èµ„æºç±»å‹ï¼š

```go
type ResourceSpec struct {
    CPU         float64 `json:"cpu"`          // CPU è¯·æ±‚é‡ï¼ˆæ ¸å¿ƒæ•°ï¼‰
    Memory      int64   `json:"memory"`       // å†…å­˜è¯·æ±‚é‡ï¼ˆMBï¼‰
    CPULimit    float64 `json:"cpu_limit"`    // CPU é™åˆ¶é‡ï¼ˆæ ¸å¿ƒæ•°ï¼‰
    MemoryLimit int64   `json:"memory_limit"` // å†…å­˜é™åˆ¶é‡ï¼ˆMBï¼‰
}

type Resource struct {
    Memory int64 `json:"memory"` // å†…å­˜ï¼ˆMBï¼‰
    VCores int32 `json:"vcores"` // è™šæ‹Ÿæ ¸å¿ƒæ•°
}
```

### 2. èµ„æºåˆ†é…

#### æœ€å°åˆ†é…å•ä½

-   **å†…å­˜**: 512 MB
-   **CPU**: 0.1 vCore

#### èµ„æºåˆ†é…ç­–ç•¥

-   **Requests vs Limits**: æ”¯æŒè¯·æ±‚é‡å’Œé™åˆ¶é‡
-   **QoS ç±»åˆ«**: Guaranteedã€Burstableã€BestEffort
-   **èµ„æºé¢„ç•™**: é˜²æ­¢èµ„æºç¢ç‰‡åŒ–

### 3. èµ„æºéš”ç¦»

#### è¿›ç¨‹éš”ç¦»

```go
type ContainerExecutor interface {
    LaunchContainer(container *Container) error
    SignalContainer(containerID string, signal os.Signal) error
    DeleteAsUser(user, path string) error
}
```

#### Cgroups éš”ç¦»ï¼ˆè§„åˆ’ä¸­ï¼‰

-   **CPU éš”ç¦»**: é™åˆ¶ CPU ä½¿ç”¨
-   **å†…å­˜éš”ç¦»**: é™åˆ¶å†…å­˜ä½¿ç”¨
-   **IO éš”ç¦»**: é™åˆ¶ç£ç›˜å’Œç½‘ç»œ IO

## ğŸ”„ åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸ

### 1. åº”ç”¨ç¨‹åºçŠ¶æ€

```go
const (
    ApplicationStateNew       = "NEW"
    ApplicationStateSubmitted = "SUBMITTED"
    ApplicationStateAccepted  = "ACCEPTED"
    ApplicationStateRunning   = "RUNNING"
    ApplicationStateFinished  = "FINISHED"
    ApplicationStateFailed    = "FAILED"
    ApplicationStateKilled    = "KILLED"
)
```

### 2. çŠ¶æ€è½¬æ¢

```
NEW â†’ SUBMITTED â†’ ACCEPTED â†’ RUNNING â†’ (FINISHED/FAILED/KILLED)
 â†“         â†“          â†“         â†“              â†“
é”™è¯¯      é”™è¯¯        é”™è¯¯      é”™è¯¯           å®Œæˆ
 â†“         â†“          â†“         â†“              â†“
FAILED   FAILED    FAILED    FAILED      FINISHED
```

### 3. åº”ç”¨ç¨‹åºæäº¤æµç¨‹

```mermaid
sequenceDiagram
    participant C as Client
    participant RM as ResourceManager
    participant S as Scheduler
    participant NM as NodeManager
    participant AM as ApplicationMaster

    C->>RM: 1. submitApplication()
    RM->>RM: 2. validateApplication()
    RM->>S: 3. scheduleAM()
    S->>RM: 4. allocateContainer()
    RM->>NM: 5. startContainer(AM)
    NM->>AM: 6. launchApplicationMaster()
    AM->>RM: 7. registerApplicationMaster()
    RM->>C: 8. applicationSubmitted()
```

## ğŸ“¦ å®¹å™¨æ¦‚å¿µ

### 1. å®¹å™¨å®šä¹‰

å®¹å™¨æ˜¯ YARN ä¸­èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ƒå°è£…äº†ï¼š

-   **èµ„æºè§„æ ¼**: CPUã€å†…å­˜ç­‰èµ„æºé‡
-   **æ‰§è¡Œç¯å¢ƒ**: ç¯å¢ƒå˜é‡ã€å·¥ä½œç›®å½•
-   **å®‰å…¨ä¸Šä¸‹æ–‡**: ç”¨æˆ·ã€æƒé™ç­‰
-   **æœ¬åœ°åŒ–èµ„æº**: åº”ç”¨ç¨‹åºä¾èµ–æ–‡ä»¶

### 2. å®¹å™¨çŠ¶æ€

```go
const (
    ContainerStateNew      = "NEW"
    ContainerStateRunning  = "RUNNING"
    ContainerStateComplete = "COMPLETE"
    ContainerStateFailed   = "FAILED"
)
```

### 3. å®¹å™¨ç”Ÿå‘½å‘¨æœŸ

```
NEW â†’ RUNNING â†’ (COMPLETE/FAILED)
 â†“       â†“           â†“
å¤±è´¥    å¤±è´¥        å®Œæˆ
 â†“       â†“           â†“
FAILED  FAILED   COMPLETE
```

## ğŸ—‚ï¸ è°ƒåº¦æ¦‚å¿µ

### 1. è°ƒåº¦å™¨ç±»å‹

#### FIFO è°ƒåº¦å™¨

-   **ç‰¹ç‚¹**: å…ˆè¿›å…ˆå‡ºï¼Œç®€å•å…¬å¹³
-   **é€‚ç”¨åœºæ™¯**: å•ç”¨æˆ·ã€æ‰¹å¤„ç†ä½œä¸š
-   **ä¼˜ç¼ºç‚¹**: ç®€å•ä½†å¯èƒ½å¯¼è‡´é¥¥é¥¿

#### Capacity è°ƒåº¦å™¨

-   **ç‰¹ç‚¹**: åŸºäºé˜Ÿåˆ—å®¹é‡çš„å±‚æ¬¡åŒ–è°ƒåº¦
-   **é€‚ç”¨åœºæ™¯**: å¤šç§Ÿæˆ·ç¯å¢ƒ
-   **ä¼˜ç¼ºç‚¹**: çµæ´»ä½†é…ç½®å¤æ‚

#### Fair è°ƒåº¦å™¨

-   **ç‰¹ç‚¹**: å…¬å¹³å…±äº«èµ„æº
-   **é€‚ç”¨åœºæ™¯**: äº¤äº’å¼ä½œä¸š
-   **ä¼˜ç¼ºç‚¹**: å…¬å¹³ä½†å¯èƒ½å½±å“ååé‡

### 2. è°ƒåº¦ç­–ç•¥

#### èµ„æºåˆ†é…ç­–ç•¥

```go
type SchedulingPolicy struct {
    // èµ„æºåˆ†é…æ¨¡å¼
    AllocationMode string `json:"allocation_mode"` // incremental, continuous

    // èŠ‚ç‚¹é€‰æ‹©ç­–ç•¥
    NodeLocalityDelay int `json:"node_locality_delay"`

    // æŠ¢å ç­–ç•¥
    PreemptionEnabled bool `json:"preemption_enabled"`
}
```

#### ä¼˜å…ˆçº§è°ƒåº¦

-   **åº”ç”¨ç¨‹åºä¼˜å…ˆçº§**: ä¸åŒåº”ç”¨ç¨‹åºçš„ä¼˜å…ˆçº§
-   **é˜Ÿåˆ—ä¼˜å…ˆçº§**: ä¸åŒé˜Ÿåˆ—çš„ä¼˜å…ˆçº§
-   **ä»»åŠ¡ä¼˜å…ˆçº§**: åŒä¸€åº”ç”¨ç¨‹åºå†…ä»»åŠ¡çš„ä¼˜å…ˆçº§

### 3. æ”¾ç½®çº¦æŸ

#### èŠ‚ç‚¹é€‰æ‹©

```go
type PlacementConstraint struct {
    // èŠ‚ç‚¹äº²å’Œæ€§
    NodeAffinity *NodeAffinity `json:"node_affinity,omitempty"`

    // èŠ‚ç‚¹åäº²å’Œæ€§
    NodeAntiAffinity *NodeAntiAffinity `json:"node_anti_affinity,omitempty"`

    // æ ‡ç­¾é€‰æ‹©å™¨
    NodeSelector map[string]string `json:"node_selector,omitempty"`
}
```

#### æ•°æ®æœ¬åœ°æ€§

-   **Node Local**: æ•°æ®åœ¨åŒä¸€èŠ‚ç‚¹
-   **Rack Local**: æ•°æ®åœ¨åŒä¸€æœºæ¶
-   **Off Switch**: æ•°æ®åœ¨ä¸åŒæœºæ¶

## ğŸ” å®‰å…¨æ¦‚å¿µ

### 1. è®¤è¯æœºåˆ¶

#### Token è®¤è¯

```go
type TokenManager struct {
    // JWT å¯†é’¥
    secretKey []byte

    // Token è¿‡æœŸæ—¶é—´
    expiration time.Duration

    // Token å­˜å‚¨
    tokenStore TokenStore
}
```

#### å…¶ä»–è®¤è¯æ–¹å¼

-   **Simple è®¤è¯**: åŸºäºç”¨æˆ·åçš„ç®€å•è®¤è¯
-   **Kerberos è®¤è¯**: ä¼ä¸šçº§å®‰å…¨è®¤è¯
-   **LDAP è®¤è¯**: åŸºäº LDAP çš„è®¤è¯

### 2. æˆæƒæœºåˆ¶

#### è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)

```go
type ACL struct {
    // ç”¨æˆ·åˆ—è¡¨
    Users []string `json:"users"`

    // ç”¨æˆ·ç»„åˆ—è¡¨
    Groups []string `json:"groups"`

    // æƒé™åˆ—è¡¨
    Permissions []Permission `json:"permissions"`
}
```

#### æƒé™ç±»å‹

-   **Submit**: æäº¤åº”ç”¨ç¨‹åº
-   **Admin**: ç®¡ç†å‘˜æƒé™
-   **View**: æŸ¥çœ‹æƒé™
-   **Modify**: ä¿®æ”¹æƒé™

### 3. å®‰å…¨éš”ç¦»

#### ç”¨æˆ·éš”ç¦»

-   **å®¹å™¨ç”¨æˆ·**: ä¸åŒç”¨æˆ·çš„å®¹å™¨ä½¿ç”¨ä¸åŒçš„ç³»ç»Ÿç”¨æˆ·
-   **æ–‡ä»¶æƒé™**: ä¸¥æ ¼çš„æ–‡ä»¶è®¿é—®æ§åˆ¶
-   **è¿›ç¨‹éš”ç¦»**: è¿›ç¨‹çº§åˆ«çš„å®‰å…¨éš”ç¦»

## ğŸ“ˆ ç›‘æ§æ¦‚å¿µ

### 1. æŒ‡æ ‡ä½“ç³»

#### ç³»ç»ŸæŒ‡æ ‡

-   **é›†ç¾¤æŒ‡æ ‡**: èŠ‚ç‚¹æ•°é‡ã€èµ„æºåˆ©ç”¨ç‡
-   **åº”ç”¨ç¨‹åºæŒ‡æ ‡**: è¿è¡Œã€å®Œæˆã€å¤±è´¥çš„åº”ç”¨ç¨‹åºæ•°é‡
-   **å®¹å™¨æŒ‡æ ‡**: å®¹å™¨åˆ†é…ã€å®Œæˆã€å¤±è´¥æ•°é‡

#### æ€§èƒ½æŒ‡æ ‡

-   **ååé‡**: åº”ç”¨ç¨‹åºæäº¤ã€å®Œæˆé€Ÿç‡
-   **å»¶è¿Ÿ**: åº”ç”¨ç¨‹åºè°ƒåº¦ã€å¯åŠ¨å»¶è¿Ÿ
-   **åˆ©ç”¨ç‡**: CPUã€å†…å­˜èµ„æºåˆ©ç”¨ç‡

### 2. å¥åº·æ£€æŸ¥

#### ç»„ä»¶å¥åº·æ£€æŸ¥

```go
type HealthChecker interface {
    CheckHealth() HealthStatus
    GetHealthReport() HealthReport
}

type HealthStatus string

const (
    HealthStatusHealthy   HealthStatus = "HEALTHY"
    HealthStatusUnhealthy HealthStatus = "UNHEALTHY"
    HealthStatusUnknown   HealthStatus = "UNKNOWN"
)
```

#### èŠ‚ç‚¹å¥åº·æ£€æŸ¥

-   **å¿ƒè·³ç›‘æ§**: èŠ‚ç‚¹å¿ƒè·³è¶…æ—¶æ£€æµ‹
-   **èµ„æºç›‘æ§**: èµ„æºä½¿ç”¨å¼‚å¸¸æ£€æµ‹
-   **ç£ç›˜ç›‘æ§**: ç£ç›˜ç©ºé—´å’Œå¥åº·æ£€æŸ¥

### 3. å‘Šè­¦æœºåˆ¶

#### å‘Šè­¦è§„åˆ™

```yaml
alerts:
    - name: "NodeDown"
      condition: "node_heartbeat_timeout > 60s"
      severity: "critical"

    - name: "HighMemoryUsage"
      condition: "memory_usage_percent > 90"
      severity: "warning"
```

## ğŸ”§ é…ç½®æ¦‚å¿µ

### 1. é…ç½®å±‚æ¬¡

#### ç³»ç»Ÿçº§é…ç½®

-   **é›†ç¾¤é…ç½®**: é›†ç¾¤èŒƒå›´çš„å…¨å±€é…ç½®
-   **ç»„ä»¶é…ç½®**: å„ç»„ä»¶çš„ç‰¹å®šé…ç½®
-   **å®‰å…¨é…ç½®**: å®‰å…¨ç›¸å…³é…ç½®

#### åº”ç”¨ç¨‹åºçº§é…ç½®

-   **åº”ç”¨ç¨‹åºé…ç½®**: åº”ç”¨ç¨‹åºç‰¹å®šé…ç½®
-   **å®¹å™¨é…ç½®**: å®¹å™¨è¿è¡Œæ—¶é…ç½®
-   **ç¯å¢ƒé…ç½®**: ç¯å¢ƒå˜é‡é…ç½®

### 2. é…ç½®ç®¡ç†

#### é…ç½®æ ¼å¼

-   **YAML**: ä¸»è¦é…ç½®æ ¼å¼
-   **JSON**: API äº¤äº’æ ¼å¼
-   **ç¯å¢ƒå˜é‡**: 12-Factor åº”ç”¨é…ç½®

#### åŠ¨æ€é…ç½®

```go
type ConfigManager interface {
    GetConfig(key string) (interface{}, error)
    SetConfig(key string, value interface{}) error
    WatchConfig(key string) (<-chan interface{}, error)
}
```

## ğŸŒ ç½‘ç»œæ¦‚å¿µ

### 1. é€šä¿¡åè®®

#### HTTP/REST

-   **ResourceManager API**: RESTful API
-   **NodeManager API**: RESTful API
-   **ApplicationMaster API**: RESTful API

#### å¿ƒè·³åè®®

```go
type HeartbeatRequest struct {
    NodeID      NodeID                `json:"node_id"`
    NodeStatus  NodeStatus            `json:"node_status"`
    Containers  []ContainerStatus     `json:"containers"`
    Timestamp   time.Time             `json:"timestamp"`
}

type HeartbeatResponse struct {
    Commands    []NodeCommand         `json:"commands"`
    Timestamp   time.Time             `json:"timestamp"`
}
```

### 2. æœåŠ¡å‘ç°

#### é™æ€å‘ç°

-   **é…ç½®æ–‡ä»¶**: åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæœåŠ¡åœ°å€
-   **ç¯å¢ƒå˜é‡**: é€šè¿‡ç¯å¢ƒå˜é‡æŒ‡å®šæœåŠ¡åœ°å€

#### åŠ¨æ€å‘ç°ï¼ˆè§„åˆ’ä¸­ï¼‰

-   **Consul**: ä½¿ç”¨ Consul è¿›è¡ŒæœåŠ¡å‘ç°
-   **etcd**: ä½¿ç”¨ etcd è¿›è¡ŒæœåŠ¡å‘ç°
-   **Kubernetes**: ä½¿ç”¨ Kubernetes æœåŠ¡å‘ç°

## ğŸ“š æ‰©å±•æ¦‚å¿µ

### 1. æ’ä»¶æ¶æ„

#### è°ƒåº¦å™¨æ’ä»¶

```go
type SchedulerPlugin interface {
    Name() string
    PreFilter(context.Context, *Pod, []*Node) *PreFilterResult
    Filter(context.Context, *Pod, *Node) *FilterResult
    Score(context.Context, *Pod, *Node) *ScoreResult
}
```

#### å­˜å‚¨æ’ä»¶

```go
type StateStore interface {
    Save(key string, value interface{}) error
    Load(key string, value interface{}) error
    Delete(key string) error
}
```

### 2. åº”ç”¨ç¨‹åºæ¡†æ¶

#### æ¡†æ¶æ¥å£

```go
type ApplicationFramework interface {
    Name() string
    SubmitApplication(spec *ApplicationSpec) (*Application, error)
    GetApplicationStatus(appID string) (*ApplicationStatus, error)
}
```

#### å†…ç½®æ¡†æ¶

-   **Simple**: ç®€å•çš„ä»»åŠ¡æ‰§è¡Œæ¡†æ¶
-   **Distributed**: åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶
-   **MapReduce**: MapReduce è®¡ç®—æ¡†æ¶ï¼ˆè§„åˆ’ä¸­ï¼‰

## ğŸ” æ•…éšœæ¢å¤æ¦‚å¿µ

### 1. æ•…éšœç±»å‹

#### èŠ‚ç‚¹æ•…éšœ

-   **ç¡¬ä»¶æ•…éšœ**: èŠ‚ç‚¹ç¡¬ä»¶å¤±æ•ˆ
-   **ç½‘ç»œæ•…éšœ**: èŠ‚ç‚¹ç½‘ç»œè¿æ¥é—®é¢˜
-   **è½¯ä»¶æ•…éšœ**: NodeManager è¿›ç¨‹å´©æºƒ

#### åº”ç”¨ç¨‹åºæ•…éšœ

-   **ApplicationMaster æ•…éšœ**: AM è¿›ç¨‹å´©æºƒ
-   **å®¹å™¨æ•…éšœ**: å®¹å™¨æ‰§è¡Œå¤±è´¥
-   **ä»»åŠ¡æ•…éšœ**: ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸

### 2. æ•…éšœå¤„ç†

#### è‡ªåŠ¨æ¢å¤

```go
type RecoveryManager struct {
    // æ¢å¤ç­–ç•¥
    policy RecoveryPolicy

    // çŠ¶æ€å­˜å‚¨
    stateStore StateStore

    // æ¢å¤å¤„ç†å™¨
    handlers map[string]RecoveryHandler
}
```

#### æ•…éšœè½¬ç§»

-   **ResourceManager HA**: ResourceManager é«˜å¯ç”¨
-   **åº”ç”¨ç¨‹åºé‡è¯•**: ApplicationMaster é‡å¯
-   **ä»»åŠ¡é‡è¯•**: å¤±è´¥ä»»åŠ¡çš„é‡æ–°æ‰§è¡Œ

## ğŸ“– ç›¸å…³æ–‡æ¡£

-   [ğŸ—ï¸ ç³»ç»Ÿæ¶æ„](./ç³»ç»Ÿæ¶æ„.md) - è¯¦ç»†çš„æ¶æ„è®¾è®¡
-   [ğŸ“¦ å¿«é€Ÿå®‰è£…æŒ‡å—](./å¿«é€Ÿå®‰è£…æŒ‡å—.md) - å¿«é€Ÿæ­å»ºé›†ç¾¤
-   [ğŸ”§ å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md) - å¼€å‘ç¯å¢ƒå’Œè§„èŒƒ
-   [âš™ï¸ é…ç½®å‚è€ƒ](./é…ç½®å‚è€ƒ.md) - å®Œæ•´é…ç½®é€‰é¡¹
